<!DOCTYPE html>
<html>
  <head>
    <title>BackTesting</title>

    <!-- Fontawesome CDN -->
	<script src="https://kit.fontawesome.com/0c287f6377.js" crossorigin="anonymous"></script>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
    <link rel="stylesheet" href="/resources/demos/style.css">
  
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  
  <script>
  $( function() {
    var stock_names = ["3M India Ltd.|3MINDIA","ABB India Ltd.|ABB","ACC Ltd.|ACC","AIA Engineering Ltd.|AIAENG","APL Apollo Tubes Ltd.|APLAPOLLO","AU Small Finance Bank Ltd.|AUBANK","Aarti Industries Ltd.|AARTIIND","Aavas Financiers Ltd.|AAVAS","Abbott India Ltd.|ABBOTINDIA","Adani Gas Ltd.|ADANIGAS","Adani Green Energy Ltd.|ADANIGREEN","Adani Ports and Special Economic Zone Ltd.|ADANIPORTS","Adani Power Ltd.|ADANIPOWER","Adani Transmission Ltd.|ADANITRANS","Aditya Birla Capital Ltd.|ABCAPITAL","Aditya Birla Fashion and Retail Ltd.|ABFRL","Advanced Enzyme Tech Ltd.|ADVENZYMES","Aegis Logistics Ltd.|AEGISCHEM","Affle (India) Ltd.|AFFLE","Ajanta Pharmaceuticals Ltd.|AJANTPHARM","Akzo Nobel India Ltd.|AKZOINDIA","Alembic Pharmaceuticals Ltd.|APLLTD","Alkem Laboratories Ltd.|ALKEM","Alkyl Amines Chemicals Ltd.|ALKYLAMINE","Allcargo Logistics Ltd.|ALLCARGO","Amara Raja Batteries Ltd.|AMARAJABAT","Amber Enterprises India Ltd.|AMBER","Ambuja Cements Ltd.|AMBUJACEM","Apollo Hospitals Enterprise Ltd.|APOLLOHOSP","Apollo Tyres Ltd.|APOLLOTYRE","Arvind Fashions Ltd.|ARVINDFASN","Asahi India Glass Ltd.|ASAHIINDIA","Ashok Leyland Ltd.|ASHOKLEY","Ashoka Buildcon Ltd.|ASHOKA","Asian Paints Ltd.|ASIANPAINT","Aster DM Healthcare Ltd.|ASTERDM","AstraZenca Pharma India Ltd.|ASTRAZEN","Astral Poly Technik Ltd.|ASTRAL","Atul Ltd.|ATUL","Aurobindo Pharma Ltd.|AUROPHARMA","Avanti Feeds Ltd.|AVANTIFEED","Avenue Supermarts Ltd.|DMART","Axis Bank Ltd.|AXISBANK","BASF India Ltd.|BASF","BEML Ltd.|BEML","BSE Ltd.|BSE","Bajaj Auto Ltd.|BAJAJ-AUTO","Bajaj Consumer Care Ltd.|BAJAJCON","Bajaj Electricals Ltd|BAJAJELEC","Bajaj Finance Ltd.|BAJFINANCE","Bajaj Finserv Ltd.|BAJAJFINSV","Bajaj Holdings & Investment Ltd.|BAJAJHLDNG","Balkrishna Industries Ltd.|BALKRISIND","Balmer Lawrie & Co. Ltd.|BALMLAWRIE","Balrampur Chini Mills Ltd.|BALRAMCHIN","Bandhan Bank Ltd.|BANDHANBNK","Bank of Baroda|BANKBARODA","Bank of India|BANKINDIA","Bank of Maharashtra.|MAHABANK","Bata India Ltd.|BATAINDIA","Bayer Cropscience Ltd.|BAYERCROP","Berger Paints India Ltd.|BERGEPAINT","Bharat Dynamics Ltd.|BDL","Bharat Electronics Ltd.|BEL","Bharat Forge Ltd.|BHARATFORG","Bharat Heavy Electricals Ltd.|BHEL","Bharat Petroleum Corporation Ltd.|BPCL","Bharat Rasayan Ltd.|BHARATRAS","Bharti Airtel Ltd.|BHARTIARTL","Bharti Infratel Ltd.|INFRATEL","Biocon Ltd.|BIOCON","Birla Corporation Ltd.|BIRLACORPN","Birlasoft Ltd.|BSOFT","Bliss GVS Pharma Ltd.|BLISSGVS","Blue Dart Express Ltd.|BLUEDART","Blue Star Ltd.|BLUESTARCO","Bombay Burmah Trading Corporation Ltd.|BBTC","Bombay Dyeing & Manufacturing Co. Ltd.|BOMDYEING","Bosch Ltd.|BOSCHLTD","Brigade Enterprises Ltd.|BRIGADE","Britannia Industries Ltd.|BRITANNIA","CARE Ratings Ltd.|CARERATING","CCL Products (I) Ltd.|CCL","CESC Ltd.|CESC","CRISIL Ltd.|CRISIL","CSB Bank Ltd.|CSBBANK","Cadila Healthcare Ltd.|CADILAHC","Can Fin Homes Ltd.|CANFINHOME","Canara Bank|CANBK","Caplin Point Laboratories Ltd.|CAPLIPOINT","Capri Global Capital Ltd.|CGCL","Carborundum Universal Ltd.|CARBORUNIV","Castrol India Ltd.|CASTROLIND","Ceat Ltd.|CEATLTD","Central Bank of India|CENTRALBK","Central Depository Services (India) Ltd.|CDSL","Century Plyboards (India) Ltd.|CENTURYPLY","Century Textile & Industries Ltd.|CENTURYTEX","Cera Sanitaryware Ltd|CERA","Chambal Fertilizers & Chemicals Ltd.|CHAMBLFERT","Chennai Petroleum Corporation Ltd.|CHENNPETRO","Cholamandalam Financial Holdings Ltd.|CHOLAHLDNG","Cholamandalam Investment and Finance Company Ltd.|CHOLAFIN","Cipla Ltd.|CIPLA","City Union Bank Ltd.|CUB","Coal India Ltd.|COALINDIA","Cochin Shipyard Ltd.|COCHINSHIP","Coforge Ltd.|COFORGE","Colgate Palmolive (India) Ltd.|COLPAL","Container Corporation of India Ltd.|CONCOR","Coromandel International Ltd.|COROMANDEL","CreditAccess Grameen Ltd.|CREDITACC","Crompton Greaves Consumer Electricals Ltd.|CROMPTON","Cummins India Ltd.|CUMMINSIND","Cyient Ltd.|CYIENT","D.B.Corp Ltd.|DBCORP","DCB Bank Ltd.|DCBBANK","DCM Shriram Ltd.|DCMSHRIRAM","DLF Ltd.|DLF","Dabur India Ltd.|DABUR","Dalmia Bharat Ltd.|DALBHARAT","Deepak Nitrite Ltd.|DEEPAKNTR","Delta Corp Ltd.|DELTACORP","Dhanuka Agritech Ltd.|DHANUKA","Dilip Buildcon Ltd.|DBL","Dish TV India Ltd.|DISHTV","Dishman Carbogen Amcis Ltd.|DCAL","Divi's Laboratories Ltd.|DIVISLAB","Dixon Technologies (India) Ltd.|DIXON","Dr. Lal Path Labs Ltd.|LALPATHLAB","Dr. Reddy's Laboratories Ltd.|DRREDDY","E.I.D. Parry (India) Ltd.|EIDPARRY","EIH Ltd.|EIHOTEL","ESAB India Ltd.|ESABINDIA","Edelweiss Financial Services Ltd.|EDELWEISS","Eicher Motors Ltd.|EICHERMOT","Elgi Equipments Ltd.|ELGIEQUIP","Emami Ltd.|EMAMILTD","Endurance Technologies Ltd.|ENDURANCE","Engineers India Ltd.|ENGINERSIN","Equitas Holdings Ltd.|EQUITAS","Eris Lifesciences Ltd.|ERIS","Escorts Ltd.|ESCORTS","Essel Propack Ltd.|ESSELPACK","Exide Industries Ltd.|EXIDEIND","FDC Ltd.|FDC","Federal Bank Ltd.|FEDERALBNK","Fine Organic Industries Ltd.|FINEORG","Finolex Cables Ltd.|FINCABLES","Finolex Industries Ltd.|FINPIPE","Firstsource Solutions Ltd.|FSL","Fortis Healthcare Ltd.|FORTIS","Future Consumer Ltd.|FCONSUMER","Future Retail Ltd.|FRETAIL","GAIL (India) Ltd.|GAIL","GE Power India Ltd.|GEPIL","GE T&D India Ltd.|GET&D","GHCL Ltd.|GHCL","GMM Pfaudler Ltd.|GMMPFAUDLR","GMR Infrastructure Ltd.|GMRINFRA","Galaxy Surfactants Ltd.|GALAXYSURF","Garden Reach Shipbuilders & Engineers Ltd.|GRSE","Garware Technical Fibres Ltd.|GARFIBRES","General Insurance Corporation of India|GICRE","Gillette India Ltd.|GILLETTE","Glaxosmithkline Pharmaceuticals Ltd.|GLAXO","Glenmark Pharmaceuticals Ltd.|GLENMARK","Godfrey Phillips India Ltd.|GODFRYPHLP","Godrej Agrovet Ltd.|GODREJAGRO","Godrej Consumer Products Ltd.|GODREJCP","Godrej Industries Ltd.|GODREJIND","Godrej Properties Ltd.|GODREJPROP","Granules India Ltd.|GRANULES","Graphite India Ltd.|GRAPHITE","Grasim Industries Ltd.|GRASIM","Great Eastern Shipping Co. Ltd.|GESHIP","Greaves Cotton Ltd.|GREAVESCOT","Grindwell Norton Ltd.|GRINDWELL","Gujarat Alkalies & Chemicals Ltd.|GUJALKALI","Gujarat Fluorochemicals Ltd.|FLUOROCHEM","Gujarat Gas Ltd.|GUJGASLTD","Gujarat Mineral Development Corporation Ltd.|GMDCLTD","Gujarat Narmada Valley Fertilizers and Chemicals Ltd.|GNFC","Gujarat Pipavav Port Ltd.|GPPL","Gujarat State Fertilizers & Chemicals Ltd.|GSFC","Gujarat State Petronet Ltd.|GSPL","Gulf Oil Lubricants India Ltd.|GULFOILLUB","H.E.G. Ltd.|HEG","HCL Technologies Ltd.|HCLTECH","HDFC Asset Management Company Ltd.|HDFCAMC","HDFC Bank Ltd.|HDFCBANK","HDFC Life Insurance Company Ltd.|HDFCLIFE","HFCL Ltd.|HFCL","Hathway Cable & Datacom Ltd.|HATHWAY","Hatsun Agro Product Ltd.|HATSUN","Havells India Ltd.|HAVELLS","HeidelbergCement India Ltd.|HEIDELBERG","Heritage Foods Ltd.|HERITGFOOD","Hero MotoCorp Ltd.|HEROMOTOCO","Hexaware Technologies Ltd.|HEXAWARE","Himadri Speciality Chemical Ltd.|HSCL","Himatsingka Seide Ltd.|HIMATSEIDE","Hindalco Industries Ltd.|HINDALCO","Hindustan Aeronautics Ltd.|HAL","Hindustan Copper Ltd.|HINDCOPPER","Hindustan Petroleum Corporation Ltd.|HINDPETRO","Hindustan Unilever Ltd.|HINDUNILVR","Hindustan Zinc Ltd.|HINDZINC","Honeywell Automation India Ltd.|HONAUT","Housing & Urban Development Corporation Ltd.|HUDCO","Housing Development Finance Corporation Ltd.|HDFC","ICICI Bank Ltd.|ICICIBANK","ICICI Lombard General Insurance Company Ltd.|ICICIGI","ICICI Prudential Life Insurance Company Ltd.|ICICIPRULI","ICICI Securities Ltd.|ISEC","ICRA Ltd.|ICRA","IDBI Bank Ltd.|IDBI","IDFC First Bank Ltd.|IDFCFIRSTB","IDFC Ltd.|IDFC","IFB Industries Ltd.|IFBIND","IFCI Ltd.|IFCI","IIFL Finance Ltd.|IIFL","IIFL Wealth Management Ltd.|IIFLWAM","IRB Infrastructure Developers Ltd.|IRB","IRCON International Ltd.|IRCON","ITC Ltd.|ITC","ITI Ltd.|ITI","India Cements Ltd.|INDIACEM","India Tourism Development Corporation Ltd.|ITDC","Indiabulls Housing Finance Ltd.|IBULHSGFIN","Indiabulls Real Estate Ltd.|IBREALEST","Indiabulls Ventures Ltd.|IBVENTURES","Indiamart Intermesh Ltd.|INDIAMART","Indian Bank|INDIANB","Indian Energy Exchange Ltd.|IEX","Indian Hotels Co. Ltd.|INDHOTEL","Indian Oil Corporation Ltd.|IOC","Indian Overseas Bank |IOB","Indian Railway Catering And Tourism Corporation Ltd.|IRCTC","IndoStar Capital Finance Ltd.|INDOSTAR","Indoco Remedies Ltd.|INDOCO","Indraprastha Gas Ltd.|IGL","IndusInd Bank Ltd.|INDUSINDBK","Infibeam Avenues Ltd.|INFIBEAM","Info Edge (India) Ltd.|NAUKRI","Infosys Ltd.|INFY","Ingersoll Rand (India) Ltd.|INGERRAND","Inox Leisure Ltd.|INOXLEISUR","Intellect Design Arena Ltd.|INTELLECT","InterGlobe Aviation Ltd.|INDIGO","Ipca Laboratories Ltd.|IPCALAB","J.B. Chemicals & Pharmaceuticals Ltd.|JBCHEPHARM","J.K. Cement Ltd.|JKCEMENT","JK Lakshmi Cement Ltd.|JKLAKSHMI","JK Paper Ltd.|JKPAPER","JK Tyre & Industries Ltd.|JKTYRE","JM Financial Ltd.|JMFINANCIL","JSW Energy Ltd.|JSWENERGY","JSW Steel Ltd.|JSWSTEEL","Jagran Prakashan Ltd.|JAGRAN","Jai Corp Ltd.|JAICORPLTD","Jammu & Kashmir Bank Ltd.|J&KBANK","Jamna Auto Industries Ltd.|JAMNAAUTO","Jindal Saw Ltd.|JINDALSAW","Jindal Stainless (Hisar) Ltd.|JSLHISAR","Jindal Stainless Ltd.|JSL","Jindal Steel & Power Ltd.|JINDALSTEL","Johnson Controls - Hitachi Air Conditioning India Ltd.|JCHAC","Jubilant Foodworks Ltd.|JUBLFOOD","Jubilant Life Sciences Ltd.|JUBILANT","Justdial Ltd.|JUSTDIAL","Jyothy Labs Ltd.|JYOTHYLAB","K.P.R. Mill Ltd.|KPRMILL","KEI Industries Ltd.|KEI","KNR Constructions Ltd.|KNRCON","KPIT Technologies Ltd.|KPITTECH","KRBL Ltd.|KRBL","KSB Ltd.|KSB","Kajaria Ceramics Ltd.|KAJARIACER","Kalpataru Power Transmission Ltd.|KALPATPOWR","Kansai Nerolac Paints Ltd.|KANSAINER","Karnataka Bank Ltd.|KTKBANK","Karur Vysya Bank Ltd.|KARURVYSYA","Kaveri Seed Company Ltd.|KSCL","Kec International Ltd.|KEC","Kolte-Patil Developers Ltd.|KOLTEPATIL","Kotak Mahindra Bank Ltd.|KOTAKBANK","L&T Finance Holdings Ltd.|L&TFH","L&T Technology Services Ltd.|LTTS","LIC Housing Finance Ltd.|LICHSGFIN","La Opala RG Ltd.|LAOPALA","Lakshmi Machine Works Ltd.|LAXMIMACH","Larsen & Toubro Infotech Ltd.|LTI","Larsen & Toubro Ltd.|LT","Laurus Labs Ltd.|LAURUSLABS","Lemon Tree Hotels Ltd.|LEMONTREE","Linde India Ltd.|LINDEINDIA","Lupin Ltd.|LUPIN","Lux Industries Ltd.|LUXIND","MAS Financial Services Ltd.|MASFIN","MMTC Ltd.|MMTC","MOIL Ltd.|MOIL","MRF Ltd.|MRF","Mahanagar Gas Ltd.|MGL","Maharashtra Scooters Ltd.|MAHSCOOTER","Maharashtra Seamless Ltd.|MAHSEAMLES","Mahindra & Mahindra Financial Services Ltd.|M&MFIN","Mahindra & Mahindra Ltd.|M&M","Mahindra CIE Automotive Ltd.|MAHINDCIE","Mahindra Holidays & Resorts India Ltd.|MHRIL","Mahindra Logistics Ltd.|MAHLOG","Manappuram Finance Ltd.|MANAPPURAM","Mangalore Refinery & Petrochemicals Ltd.|MRPL","Marico Ltd.|MARICO","Maruti Suzuki India Ltd.|MARUTI","Max Financial Services Ltd.|MFSL","Metropolis Healthcare Ltd.|METROPOLIS","MindTree Ltd.|MINDTREE","Minda Corporation Ltd.|MINDACORP","Minda Industries Ltd.|MINDAIND","Mishra Dhatu Nigam Ltd.|MIDHANI","Motherson Sumi Systems Ltd.|MOTHERSUMI","Motilal Oswal Financial Services Ltd.|MOTILALOFS","MphasiS Ltd.|MPHASIS","Multi Commodity Exchange of India Ltd.|MCX","Muthoot Finance Ltd.|MUTHOOTFIN","NATCO Pharma Ltd.|NATCOPHARM","NBCC (India) Ltd.|NBCC","NCC Ltd.|NCC","NESCO Ltd.|NESCO","NHPC Ltd.|NHPC","NLC India Ltd.|NLCINDIA","NMDC Ltd.|NMDC","NTPC Ltd.|NTPC","Narayana Hrudayalaya Ltd.|NH","National Aluminium Co. Ltd.|NATIONALUM","National Fertilizers Ltd.|NFL","Nava Bharat Ventures Ltd.|NBVENTURES","Navin Fluorine International Ltd.|NAVINFLUOR","Nestle India Ltd.|NESTLEIND","Nilkamal Ltd.|NILKAMAL","Nippon Life India Asset Management Ltd.|NAM-INDIA","Oberoi Realty Ltd.|OBEROIRLTY","Oil & Natural Gas Corporation Ltd.|ONGC","Oil India Ltd.|OIL","Omaxe Ltd.|OMAXE","Oracle Financial Services Software Ltd.|OFSS","Orient Cement Ltd.|ORIENTCEM","Orient Electric Ltd.|ORIENTELEC","Orient Refractories Ltd.|ORIENTREF","PI Industries Ltd.|PIIND","PNB Housing Finance Ltd.|PNBHOUSING","PNC Infratech Ltd.|PNCINFRA","PTC India Ltd.|PTC","PVR Ltd.|PVR","Page Industries Ltd.|PAGEIND","Persistent Systems Ltd.|PERSISTENT","Petronet LNG Ltd.|PETRONET","Pfizer Ltd.|PFIZER","Phillips Carbon Black Ltd.|PHILIPCARB","Phoenix Mills Ltd.|PHOENIXLTD","Pidilite Industries Ltd.|PIDILITIND","Piramal Enterprises Ltd.|PEL","Poly Medicure Ltd.|POLYMED","Polycab India Ltd.|POLYCAB","Power Finance Corporation Ltd.|PFC","Power Grid Corporation of India Ltd.|POWERGRID","Praj Industries Ltd.|PRAJIND","Prestige Estates Projects Ltd.|PRESTIGE","Prism Johnson Ltd.|PRSMJOHNSN","Procter & Gamble Health Ltd.|PGHL","Procter & Gamble Hygiene & Health Care Ltd.|PGHH","Punjab National Bank|PNB","Quess Corp Ltd.|QUESS","RBL Bank Ltd.|RBLBANK","REC Ltd.|RECLTD","RITES Ltd.|RITES","Radico Khaitan Ltd|RADICO","Rail Vikas Nigam Ltd.|RVNL","Rain Industries Ltd|RAIN","Rajesh Exports Ltd.|RAJESHEXPO","Rallis India Ltd.|RALLIS","Rashtriya Chemicals & Fertilizers Ltd.|RCF","Ratnamani Metals & Tubes Ltd.|RATNAMANI","Raymond Ltd.|RAYMOND","Redington (India) Ltd.|REDINGTON","Relaxo Footwears Ltd.|RELAXO","Reliance Industries Ltd.|RELIANCE","Repco Home Finance Ltd.|REPCOHOME","SBI Cards and Payment Services Ltd.|SBICARD","SBI Life Insurance Company Ltd.|SBILIFE","SJVN Ltd.|SJVN","SKF India Ltd.|SKFINDIA","SRF Ltd.|SRF","Sadbhav Engineering Ltd.|SADBHAV","Sanofi India Ltd.|SANOFI","Schaeffler India Ltd.|SCHAEFFLER","Schneider Electric Infrastructure Ltd.|SCHNEIDER","Security and Intelligence Services (India) Ltd.|SIS","Sequent Scientific Ltd.|SEQUENT","Sheela Foam Ltd.|SFL","Shipping Corporation of India Ltd.|SCI","Shoppers Stop Ltd.|SHOPERSTOP","Shree Cement Ltd.|SHREECEM","Shree Renuka Sugars Ltd.|RENUKA","Shriram City Union Finance Ltd.|SHRIRAMCIT","Shriram Transport Finance Co. Ltd.|SRTRANSFIN","Siemens Ltd.|SIEMENS","Sobha Ltd.|SOBHA","Solar Industries India Ltd.|SOLARINDS","Sonata Software Ltd.|SONATSOFTW","South Indian Bank Ltd.|SOUTHBANK","Spandana Sphoorty Financial Ltd.|SPANDANA","Spicejet Ltd.|SPICEJET","Star Cement Ltd.|STARCEMENT","State Bank of India|SBIN","Steel Authority of India Ltd.|SAIL","Sterling And Wilson Solar Ltd.|SWSOLAR","Sterlite Technologies Ltd.|STRTECH","Strides Pharma Science Ltd.|STAR","Sudarshan Chemical Industries Ltd.|SUDARSCHEM","Sumitomo Chemical India Ltd.|SUMICHEM","Sun Pharma Advanced Research Company Ltd.|SPARC","Sun Pharmaceutical Industries Ltd.|SUNPHARMA","Sun TV Network Ltd.|SUNTV","Sundaram Finance Ltd.|SUNDARMFIN","Sundram Fasteners Ltd.|SUNDRMFAST","Sunteck Realty Ltd.|SUNTECK","Suprajit Engineering Ltd.|SUPRAJIT","Supreme Industries Ltd.|SUPREMEIND","Suzlon Energy Ltd.|SUZLON","Swan Energy Ltd.|SWANENERGY","Symphony Ltd.|SYMPHONY","Syngene International Ltd.|SYNGENE","TCI Express Ltd.|TCIEXP","TCNS Clothing Co. Ltd.|TCNSBRANDS","TTK Prestige Ltd.|TTKPRESTIG","TV Today Network Ltd.|TVTODAY","TV18 Broadcast Ltd.|TV18BRDCST","TVS Motor Company Ltd.|TVSMOTOR","Take Solutions Ltd.|TAKE","Tasty Bite Eatables Ltd.|TASTYBITE","Tata Communications Ltd.|TATACOMM","Tata Consultancy Services Ltd.|TCS","Tata Consumer Products Ltd.|TATACONSUM","Tata Elxsi Ltd.|TATAELXSI","Tata Investment Corporation Ltd.|TATAINVEST","Tata Motors Ltd DVR|TATAMTRDVR","Tata Motors Ltd.|TATAMOTORS","Tata Power Co. Ltd.|TATAPOWER","Tata Steel BSL Ltd.|TATASTLBSL","Tata Steel Ltd.|TATASTEEL","Teamlease Services Ltd.|TEAMLEASE","Tech Mahindra Ltd.|TECHM","The New India Assurance Company Ltd.|NIACL","The Ramco Cements Ltd.|RAMCOCEM","Thermax Ltd.|THERMAX","Thyrocare Technologies Ltd.|THYROCARE","Time Technoplast Ltd.|TIMETECHNO","Timken India Ltd.|TIMKEN","Titan Company Ltd.|TITAN","Torrent Pharmaceuticals Ltd.|TORNTPHARM","Torrent Power Ltd.|TORNTPOWER","Trent Ltd.|TRENT","Trident Ltd.|TRIDENT","Tube Investments of India Ltd.|TIINDIA","UCO Bank|UCOBANK","UFLEX Ltd.|UFLEX","UPL Ltd.|UPL","Ujjivan Financial Services Ltd.|UJJIVAN","Ujjivan Small Finance Bank Ltd.|UJJIVANSFB","UltraTech Cement Ltd.|ULTRACEMCO","Union Bank of India|UNIONBANK","United Breweries Ltd.|UBL","United Spirits Ltd.|MCDOWELL-N","V-Guard Industries Ltd.|VGUARD","V-Mart Retail Ltd.|VMART","V.I.P. Industries Ltd.|VIPIND","VRL Logistics Ltd.|VRLLOG","VST Industries Ltd.|VSTIND","Vaibhav Global Ltd.|VAIBHAVGBL","Vakrangee Ltd.|VAKRANGEE","Vardhman Textiles Ltd.|VTL","Varroc Engineering Ltd.|VARROC","Varun Beverages Ltd.|VBL","Venky's (India) Ltd.|VENKEYS","Vesuvius India Ltd.|VESUVIUS","Vinati Organics Ltd.|VINATIORGA","Vodafone Idea Ltd.|IDEA","Voltas Ltd.|VOLTAS","WABCO India Ltd.|WABCOINDIA","Welspun Corp Ltd.|WELCORP","Welspun India Ltd.|WELSPUNIND","Westlife Development Ltd.|WESTLIFE","Whirlpool of India Ltd.|WHIRLPOOL","Wipro Ltd.|WIPRO","Wockhardt Ltd.|WOCKPHARMA","Zee Entertainment Enterprises Ltd.|ZEEL","Zensar Technolgies Ltd.|ZENSARTECH","Zydus Wellness Ltd.|ZYDUSWELL","eClerx Services Ltd.|ECLERX"]

    $( "#stock" ).autocomplete({
      source: stock_names
    });
  } );
  </script>
    
  <script>
        var no_of_entry = 1;
        var no_of_exit = 1;
  </script>

    <style>
        .BODY{
		font-weight: bold;
		background-color: #282828;
		color: #ffffff;
		letter-spacing: 2px;
            	font-size: 18px;
            	margin-left: 13.5%;
	}

        input{
		width: 325px;
		height: 5%;
		font-size: 18px;
		color: #000000;
           	margin-right: 30px;
            	padding-left: 10px;
            	height: 35px;
	}

        select {
            	font-size: 16px;
		color: #000000;
            	margin-right: 35px;
            	height: 35px;
		width: 200px;
        }

        .title {
		font-size: 48px;
		padding-top: 25px;
        	padding-bottom: 25px;
		font-weight: bold;
		color: #faf9ae;		
		letter-spacing: 2px;
            	text-align: center;
            	margin-left: -13.5%;
	}

        .LABEL {
            letter-spacing: 1px;
            font-size: 20px;
            margin-top: 30px;
        }

        .remove {
            background-color: #ed1c24;
            border-color: #ffffff;
            color: #ffffff;
            height: 5%;
            width: 100px;
            border-radius: 5px;
            border-width: thin;
        }

        .remove:hover {
            background-color: #c1191f;
            border: #ffffff;
        }

        .btn-success{
            margin-top: 10px;
        }

        .btn-primary {
            font-size: 24px;
            font-weight: bold;
            width: 150px;
            margin-left: -13.5%;
            margin-right: 0px;
            padding: 0 0 0 0px;
            height: 40px;;
        }

        .value {
            width: 120px;
        }

        .parameter {
            margin-bottom: 10px;
        }

    </style>
    
  </head>
  
  <body class="BODY">

    {% if user.is_authenticated %}
        <h1 class="title"> Hi <span style="color:#aef682;">{{ request.user.username }}!!</span> Welcome To Backtesting <i class="fas fa-chart-line"></i></h1>
    {% endif %}

    <form id ="backtesting_form" method = "POST" action = "{% url 'result' %}" onsubmit = "submit_form()">{%csrf_token%}
        
        <div id = "stock_select">
            <label for = "stock" class="LABEL">Choose a Stock:</label>
            <input id = "stock" name="stock" type = "text">
        </div>
        
        <p class="LABEL">Entry rules: <br></p>
        
        <div id = "entry_rules">
            <div id = "entry1_form">
                <select name = "entry1" id = "entry1" onchange = "add_parameter_value(1,'entry')">
                    <option disabled selected value> -- Select an Indicator -- </option>
                    <option value="rsi">RSI</option>
                    <option value="mfi">Money Flow Index</option>
                    <option value="ema10">EMA(10)</option>
                    <option value="ema10">EMA(20)</option>
                    <option value="ema10">EMA(50)</option>
                    <option value="ema10">EMA(100)</option>
                    <option value="ema10">EMA(200)</option>

                    <option value="sma10">SMA(10)</option>
                    <option value="sma20">SMA(20)</option>
                    <option value="sma50">SMA(50)</option>
                    <option value="sma100">SMA(100)</option>
                    <option value="sma200">SMA(200)</option>

                    <option value="roc">Rate Of Change</option>
                    <option value="macd">MACD</option>
                    <option value="srsi">Fast Line(Stochastic RSI(14))</option>
                    <option value="wil">Williams %R</option>
                    <option value="clo">Close Price</option>
                    <option value="cl">Conversion Line</option>
                    <option value="ls">Lag span</option>
                </select>
            </div>
            
            <button type="button" onclick = "add_rule('entry')" class="btn btn-success">Add</button>
        </div>
        
        <p class="LABEL">Exit rules: <br></p>
        
        <div id = "exit_rules">
            <div id = "exit1_form">
                <select name = "exit1" id = "exit1" onchange = "add_parameter_value(1, 'exit')">
                <option disabled selected value> -- Select an Indicator -- </option>
                    <option value="rsi">RSI</option>
                    <option value="mfi">Money Flow Index</option>
                    <option value="ema10">EMA(10)</option>
                    <option value="ema10">EMA(20)</option>
                    <option value="ema10">EMA(50)</option>
                    <option value="ema10">EMA(100)</option>
                    <option value="ema10">EMA(200)</option>

                    <option value="sma10">SMA(10)</option>
                    <option value="sma20">SMA(20)</option>
                    <option value="sma50">SMA(50)</option>
                    <option value="sma100">SMA(100)</option>
                    <option value="sma200">SMA(200)</option>

                    <option value="roc">Rate Of Change</option>
                    <option value="macd">MACD</option>
                    <option value="srsi">Fast Line(Stochastic RSI(14))</option>
                    <option value="wil">Williams %R</option>
                    <option value="clo">Close Price</option>
                    <option value="cl">Conversion Line</option>
                    <option value="ls">Lag span</option>

                </select>
            </div>
            <button type="button" onclick = "add_rule('exit')" class="btn btn-success">Add</button>
        </div>
        
        <center><input type="submit" onclick = "submit_form()" value = "Backtest" class="btn btn-primary"></button></center>
    </form>

    <div style = "display: none;" id = "parameters_add">
        <select class = "parameter">
            <option value = "crossover">Cross over</option>
            <option value = "crossunder">Cross under</option>
            <option value = "above">Above</option>
            <option value = "below">Below</option>
        </select>
    </div>
    
    <div style="display:none" id = "rsi_value">
            <input type =  "number" min = "0" max = "100" class="value">
    </div>
    <div style="display:none" id = "srsi_value">
        <select class = "value">
            <option value = "slow">Slow</option>
            <option value = "0">0</option>
            <option value = "10">10</option>
            <option value = "20">20</option>
            <option value = "30">30</option>
            <option value = "40">40</option>
            <option value = "50">50</option>
            <option value = "60">60</option>
            <option value = "70">70</option>
            <option value = "80">80</option>
            <option value = "90">90</option>
            <option value = "100">100</option>
        </select>
    </div>
    <div style="display:none" id = "wil_value">
            <input type =  "number" class="value">
    </div>

    <div style="display:none" id = "roc_value">
            <input type =  "number" class="value">
    </div>

    <div style = "display:none" id = "clo_value">
        <select class = "value">
            <option value = "lb">Lower band</option>
            <option value = "mb">Middle band</option>
            <option value = "up">Upper band</option>
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>

            <option value = "pp">Pivot Point</option>
            <option value = "s1">Support 1</option>
            <option value = "s2">Support 2</option>
            <option value = "s3">Support 3</option>

            <option value = "r1">Resistance 1</option>
            <option value = "r2">Resistance 2</option>
            <option value = "r3">Resistance 3</option>


            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>

            <option value = "cl">Conversion Line</option>
            <option value = "bl">Base Line</option>
            <option value = "ls">Lag span</option>
            <option value = "gc">Green Cloud</option>
            <option value = "rc">Red Cloud</option>

        </select>
    </div>
    <div style = "display:none" id = "macd_value">
        <select class = "value">
            <option value = "zero">Zero Line</option>
            <option value = "sig">Signal Line </option>
        </select>
    </div>
    <div style = "display:none" id = "cl_value">
        <select class = "value">
            <option value = "cl">Conversion Line</option>
            <option value = "bl">Base Line</option>
            <option value = "ls">Lag span</option>
            <option value = "gc">Green Cloud</option>
            <option value = "rc">Red Cloud</option>
        </select>
    </div>
    <div style = "display:none" id = "ls_value">
        <select class = "value">
            <option value = "cl">Conversion Line</option>
            <option value = "bl">Base Line</option>
            <option value = "ls">Lag span</option>
            <option value = "gc">Green Cloud</option>
            <option value = "rc">Red Cloud</option>
        </select>
    </div>

    <div style="display:none" id = "mfi_value">
        <input type =  "number" min = "0" max = "100" class="value">
    </div>
    
    <div style="display:none" id = "ema10_value">
        <select class="value">
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>
        </select>
    </div>
    <div style="display:none" id = "ema20_value">
        <select class="value">
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>
        </select>
    </div>
   <div style="display:none" id = "ema50_value">
        <select class="value">
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>
        </select>
    </div>
   <div style="display:none" id = "ema100_value">
        <select class="value">
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>
        </select>
    </div>
   <div style="display:none" id = "ema200_value">
        <select class="value">
            <option value = "ema10">EMA(10)</option>
            <option value = "ema20">EMA(20)</option>
            <option value = "ema50">EMA(50)</option>
            <option value = "ema100">EMA(100)</option>
            <option value = "ema200">EMA(200)</option>
        </select>
    </div>



    <div style="display:none" id = "sma10_value">
        <select class="value">
            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>
        </select>
    </div>
    <div style="display:none" id = "sma20_value">
        <select class="value">
            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>
        </select>
    </div>
    <div style="display:none" id = "sma50_value">
        <select class="value">
            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>
        </select>
    </div>
    <div style="display:none" id = "sma100_value">
        <select class="value">
            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>
        </select>
    </div>
    <div style="display:none" id = "sma200_value">
        <select class="value">
            <option value = "sma10">SMA(10)</option>
            <option value = "sma20">SMA(20)</option>
            <option value = "sma50">SMA(50)</option>
            <option value = "sma100">SMA(100)</option>
            <option value = "sma200">SMA(200)</option>
        </select>
    </div>

    <div style = "display:none" id = "remove_button">
        <button type = "button" class = "remove">Remove</button>
    </div>
        
    <script>
   var submit_form = function(){
            var form = document.getElementById("backtesting_form")
            var input = document.createElement("input")
            input.setAttribute("type", "hidden")
            input.setAttribute("name", "total_entries")
            input.setAttribute("value", no_of_entry)

            var input2 = document.createElement("input")
            input2.setAttribute("type", "hidden")
            input2.setAttribute("name", "total_exits")
            input2.setAttribute("value", no_of_exit)
            form.appendChild(input)
            form.appendChild(input2)
            //form.submit();
        }
        var reset_id = function(type){
            var rules = document.getElementById(type + "_rules")
            for(var i= 0; i < rules.children.length-1; ++i){
                form = rules.children[i]
                var id_index = 5;
                if(type == "entry") id_index = 5;
                else                id_index = 4;
                var old_id = form.getAttribute("id").charAt(id_index);
                var new_id = i+1
                form.setAttribute("id", type+new_id+"_form")

                var select_ind = document.getElementById(type+ old_id)
                select_ind.setAttribute("name", type+new_id)
                select_ind.setAttribute("id", type+new_id)
                select_ind.setAttribute("onchange", "add_parameter_value("+ new_id + "," + "'" +type +"'" +")")

                var select_para = document.getElementById(type+"_parameter" + old_id)
                select_para.setAttribute("name", type+"_parameter"+new_id )
                select_para.setAttribute("id", type+"_parameter" + new_id)

                var value = document.getElementById(type+"_value" + old_id)
                value.setAttribute("name", type+"_value" + new_id)
                value.setAttribute("id", type+"_value" + new_id)
            }
        }
        var remove = function(id ,type){
            var to_be_removed = document.getElementById(type + id +"_form")
            to_be_removed.parentNode.removeChild( to_be_removed )
            if(type == "entry") no_of_entry--;
            else                no_of_exit--;
            reset_id(type)
        }
        var add_rule = function(type){
            if(type == 'entry')            no_of_entry = no_of_entry + 1;
            else                           no_of_exit = no_of_exit+ 1;

            var cur_len = no_of_entry
            if(type == 'exit')  cur_len= no_of_exit

            var select_ind= document.getElementById(type+ "1").cloneNode(true)
            select_ind.setAttribute("name", type+cur_len)
            select_ind.setAttribute("id", type + cur_len)
            select_ind.setAttribute("onchange", "add_parameter_value("+ cur_len + "," + "'" +type +"'" +")")

            var div = document.createElement("div")
            div.setAttribute("id", type+cur_len+"_form");
            div.appendChild(select_ind)
            var rules = document.getElementById(type+"_rules")
            rules.insertBefore( div, rules.children[ rules.children.length-1 ] )
        }
        var add_parameter_value = function(id, type){
            var select = document.getElementById(type+id)
            var backtesting_form = document.getElementById("backtesting_form")
            var para_to_add = document.getElementById("parameters_add").children[0].cloneNode(true)

            var form = document.getElementById(type+ + id + "_form")
            if(form.getElementsByClassName("parameter").length > 0){
                form.removeChild( form.getElementsByClassName("parameter")[0] )
            }
            if(form.getElementsByClassName("value").length > 0){
                form.removeChild( form.getElementsByClassName("value")[0] )
            }
            if(form.getElementsByClassName("remove").length > 0){
                form.removeChild( form.getElementsByClassName("remove")[0] )
            }
            para_to_add.setAttribute("id",type+"_parameter"+id)
            para_to_add.setAttribute("name",type+"_parameter"+id)
            form.appendChild( para_to_add )

            var value_to_add = document.getElementById(select.value +"_value").children[0].cloneNode(true)
            value_to_add.setAttribute("id", type+ "_value"+id)
            value_to_add.setAttribute("name", type+"_value"+id)
            form.appendChild( value_to_add )

            var button = document.getElementById("remove_button").children[0].cloneNode(true)
            button.setAttribute("onclick","remove(" + id + "," +"'"+ type +"'"+ ")")
            if(id != 1){
                form.appendChild( button )
            }
        }
    </script>

    {% if user.is_authenticated %}
    <form method ='POST' action = "{% url 'logout' %}" id='logout'>
        {% csrf_token %}
            <center style="margin-left:-13.5%;margin-top: 20px;"><a href="javascript:document.getElementById('logout').submit();" class="LABEL">Logout</a></center>
        {% endif %}
    </form>

</body>
</html>
